<div ms-controller="room">
    <div id="pullrefresh" class="mui-scroll-wrapper">
        <div class="mui-scroll">
            <div class="swiper-container swiper1" style="z-index: 0;">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="room.roomGalleryList" data-repeat-rendered="swiper1Render">
                        <div style="width: 100%;height: 100%;background-size: cover;background-position: center;"  ms-css-background-image="'url(' + urlAPINet + el.imgUrl+')'" ms-attr-data-preview-src="urlAPINet + el.imgUrl" data-preview-group="1" ms-data-tag="el.imgDesc">
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <section style="margin: -10px auto;">
                <div class="hotel">
                    <div ms-on-tap="goHotel">
                        <span style="color:gold; font-size:20px;">{{room.hotel.alias}}</span>
                        <span>{{room.name}}</span><br>
                        <span>{{room.hotel.address}}</span><br>
                    </div>
                    <span ms-on-tap="openNav()" class="mui-icon mui-icon-map mui-text-danger" style="font-size: 34px"></span>
                </div>

                <div class="swiper-container swiper3" style="height: 50px;">
                    <div class="swiper-wrapper" style="padding-left: 0;">
                        <div class="swiper-slide" ms-repeat="room.amenityList" style="background: #aaa;width: 80px;" data-repeat-rendered="swiper3Render">
                            <img ms-attr-src="urlAPINet + el.ico" ms-attr-alt="el.name" style="width: 40px;height: 40px;">{{el.name}}
                        </div>
                        <div class="swiper-scrollbar"></div>
                    </div>
                </div>
               
                <div class="mui-text-center" style="background: white;padding: 0 28px;">
                    <br />
                    <div class="circle photo" ms-css-background-image="'url('+urlAPINet + room.designer.portraitUrl+')'">
                        &nbsp;
                    </div>
                    <br />
                    <h4 style="display: inline;margin-right: 10px;">{{room.designer.name}}</h4><small style="color:#999;">试睡师</small>
                    <div class="small" style="margin: 20px auto;height: 40px; overflow:hidden;">{{room.designer.message}}</div>
                    <span class="small" style="position: relative;top: -38px;left: 8px;float: right;">...</span>

                    <button class="mui-btn" style="margin-bottom: 30px;" onclick="popover('./util/assess.html',loadUrl)">更多信息</button>
                </div>
            </section>

            <section class="time">
                <p>入住时间</p>
                <div class="time-panel" ms-on-tap="openTimePanel">
                    <div style="float: left;">
                        {{start|html}}
                    </div>
                    <div style="text-align: center;font-size: 12px;">|<br>{{amount + (type?'小时':'晚')}}<br>|</div>
                    <div style="float: right;text-align: right;">
                        {{end|html}}
                    </div>
                </div>
                <hr>
                <div class="time-clock" ms-if="!type">
                    <span style="color: #fff;background-color: #000;font-size: 12px;padding: 4px;">教你省钱</span>
                    &nbsp;&nbsp;<span style="font-size: 12px;">越晚入住越省钱哦！</span><br>
                    <div>
                        <div ms-repeat="roomNightDiscount" ms-on-tap="selectDiscount($index)" ms-class-1="discount-disabled:disableCheckinTime(todayIndex, el.startTime)" ms-class-2="discount-selected:$index == startTimeIndex">
                            <img src="./img/icon1.jpg" alt=""><br>
                            {{el.startTime}}:00后<br>
                            ¥ {{el.discount}}
                        </div>
                    </div>
                </div>
            </section>

            <section class="checkin" ms-on-tap="openCheckin">
                <p>入住人信息 <span class="mui-icon mui-icon-compose" style="color: #000;float: right;"></span></p>
                <div ms-repeat="checkinList">
                    {{el.name}}
                </div>
            </section>

            <div style="width: 95%;padding: 13px 0px;background: #eee;margin: 0 auto;margin-top:20px;">更多房间</div>
            <div class="swiper-container swiper2">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="list" data-repeat-rendered="swiper2Render">
                        <!-- roomSlide -->
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <br><br><br>
        </div>
    </div>

     <nav class="mui-bar mui-bar-tab">
        <h4 class="mui-pull-left" style="margin: 13px;">
            <span class="error" style="font-weight: lighter;"><span style="font-size:24px;">{{showTotalPrice(price, amount)}}</span></span>
            <span style="font-weight: 100;" ms-if="!type"><del>{{showTotalPrice(roomNightDiscount[0].discount,amount)}}</del></span>
        </h4>
        <button type="button" class="mui-btn mui-btn-danger mui-pull-right" ms-click="goNext" ms-attr-disabled="isGoNext">立即预订</button>
    </nav>
</div>