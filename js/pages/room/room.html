<div ms-controller="room">
    <div id="pullrefresh" class="mui-scroll-wrapper" style="background-color: #DCD9D5">
        <div class="mui-scroll">
            <div class="swiper-container swiper1" style="z-index: 0;height: 300px;">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="room.roomGalleryList" data-repeat-rendered="swiper1Render">
                        <div style="width: 100%;height: 100%;background-size: cover;background-position: center;" ms-css-background-image="'url(' + urlAPINet + el.imgUrl+')'" ms-attr-data-preview-src="urlAPINet + el.imgUrl" data-preview-group="1" ms-data-tag="el.imgDesc">
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <section style="margin: -10px auto;">
                <div class="hotel">
                    <div ms-on-tap="goHotel">
                        <span class="hotel-alias bs-text-larger">{{room.hotel.alias}}</span>
                        <span class="room-name bs-text-larger">{{room.name}}</span>
                        <p class="hotel-address bs-text-large">{{room.hotel.address}}</p>
                    </div>
                    <span ms-on-tap="openNav()" class="line" style="background-image: url(img/line.png); top: 0; position: absolute;"></span>
                </div>
                <div class="swiper-container swiper3 room-amenity">
                    <div class="swiper-wrapper" style="padding-left: 0;">
                        <div class="swiper-slide room-amenity-item" ms-repeat="room.amenityList" data-repeat-rendered="swiper3Render">
                            <img ms-attr-src="urlAPINet + el.ico" ms-attr-alt="el.name" style="width: 28px;height: 28px;margin-left: 10px" />
                            <label class="bs-text-small room-amenity-text">{{el.name}}</label>
                        </div>
                        <div class="swiper-scrollbar"></div>
                    </div>
                </div>
                <div class="mui-text-center" style="background: white;padding: 0 10px;" ms-if="!type">
                    <div style="margin-top: 35px" class="circle photo" ms-css-background-image="'url('+urlAPINet + room.designer.portraitUrl+')'">
                        &nbsp;
                    </div>
                    <br />
                    <h4 style="display: inline;margin-right: 10px;">{{room.designer.name}}</h4><small style="color:#999;">试睡师</small>
                    <div class="room-designer-message">{{room.designer.message | truncate(50,'...')}}</div>
                    <button class="mui-btn" style="width: 100px;margin-bottom: 30px; border-radius: 0;" ms-on-tap="openDesigner">更多信息</button>
                </div>
            </section>
            <section class="room-time">
                <p>
                    <span>入住时间</span>
                    <span style="float: right">退房时间</span>
                </p>
                <div class="time-panel" ms-on-tap="openTimePanel">
                    <div style="float: left;">
                        {{start|html}}
                    </div>
                    <div style="text-align: center;font-size: 12px;">|
                        <br>{{amount + (type?'小时':'晚')}}
                        <br>|</div>
                    <div style="float: right;text-align: right;">
                        {{end|html}}
                    </div>
                </div>

                <hr ms-if="!type" style="margin-top: 0px;margin-bottom: 20px;">

                <div class="time-clock" ms-if="!type">
                    <span class="bs-text-smaller" style="color: #fff;background-color: #000;    display: inline-block;width: 61px;text-align: center;margin-right: 10px;">教你省钱</span>
                    <span class="bs-text-small">越晚入住越省钱哦！</span>
                    <br>
                    <div>
                        <div ms-repeat="roomNightDiscount" ms-on-tap="selectDiscount($index, el.startTime)" ms-class-1="discount-disabled:disableCheckinTime(startIndex, el.startTime)" ms-class-2="discount-selected:$index == startTimeIndex">
                            <img ms-attr-src="getClock($index, startTimeIndex, startIndex, el.startTime)" alt="">
                            <br>
                            <span class="bs-text-smaller">{{el.startTime}}:00后</span>
                            <br>
                            <span class="bs-text-large">¥ {{el.discount}}</span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="checkin" ms-on-tap="openCheckin">
                <p>
                    入住人信息 
                    <img src="img/edit.png" alt="" style="width: 22px;float: right;"/>
                </p>
                <div ms-repeat="checkinList">
                    {{el.name}}
                </div>
            </section>
            <div class="bs-text-smaller" style="width: 95%;margin: 10px auto;padding: 10px" ms-on-tap="clickIsAgree">
                <span class="isAgree" ms-class-1="unchecked: !isAgree" ms-class-2="checked:isAgree"></span>
                我同意<span class="bs-text-gold" ms-on-tap="openRule">《入住条款》</span>
            </div>
            <div class="bs-text-large" style="width: 95%;padding: 10px 0 14px 10px;margin: 0 auto;">更多房间</div>
            <div class="swiper-container swiper2">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="list" data-repeat-rendered="swiper2Render">
                        <!-- roomSlide -->
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <br>
            <br>
            <br>
        </div>
    </div>
    <nav class="mui-bar mui-bar-tab bs-bg-gray bs-text-white">
        <div style="margin: 14px 0 0 10px;">
            <span class="bs-text-smaller">￥</span>
            <span class="bs-text-x-large">{{showTotalPrice(price, amount)}}</span>
            <span style="font-weight: 100;" ms-if="!type">
                <span class="bs-text-smaller">￥</span>
                <del class="bs-text-small">{{showTotalPrice(roomNightDiscount[0].discount,amount)}}</del>
            </span>
        </div>
        <button type="button" class="mui-btn mui-pull-right bs-text-large bs-text-white bs-bg-black" ms-click="goNext" ms-attr-disabled="isGoNext">立即预订</button>
    </nav>
</div>
