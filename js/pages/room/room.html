<div ms-controller="room">
    <div id="pullrefresh" class="mui-scroll-wrapper" style="background-color: #DCD9D5">
        <div class="mui-scroll">
            <div class="swiper-container swiper1" style="z-index: 0;height: 250px;">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="room.roomGalleryList" data-repeat-rendered="swiper1Render">
                        <div style="width: 100%;height: 100%;background-size: cover;background-position: center;"  ms-css-background-image="'url(' + urlAPINet + el.imgUrl+')'" ms-attr-data-preview-src="urlAPINet + el.imgUrl" data-preview-group="1" ms-data-tag="el.imgDesc">
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <section style="margin: -10px auto;">
                <div class="hotel">
                    <div ms-on-tap="goHotel">
                        <span class="hotel-alias">{{room.hotel.alias}}</span>
                        <span class="room-name">{{room.name}}</span>
                        <span class="hotel-address">{{room.hotel.address}}</span>
                    </div>
                    <span ms-on-tap="openNav()" class="mui-icon mui-icon-map mui-text-danger" style="font-size: 32px;top:0;"></span>
                </div>

                <div class="swiper-container swiper3 room-amenity">
                    <div class="swiper-wrapper" style="padding-left: 0;">
                        <div class="swiper-slide room-amenity-item" ms-repeat="room.amenityList" data-repeat-rendered="swiper3Render">
                            <img ms-attr-src="urlAPINet + el.ico" ms-attr-alt="el.name" style="width: 28px;height: 28px;margin-left: 10px"/>
                            <label class="room-amenity-text">{{el.name}}</label>
                        </div>
                        <div class="swiper-scrollbar"></div>
                    </div>
                </div>
               
                <div class="mui-text-center" style="background: white;padding: 0 10px;">
                    <div style="margin-top: 35px" class="circle photo" ms-css-background-image="'url('+urlAPINet + room.designer.portraitUrl+')'">
                        &nbsp;
                    </div>
                    <br />
                    <h4 style="display: inline;margin-right: 10px;">{{room.designer.name}}</h4><small style="color:#999;">试睡师</small>
                    <div class="room-designer-message">{{room.designer.message | truncate(50,'...')}}</div>

                    <button class="mui-btn" style="width: 100px;margin-bottom: 30px;" onclick="popover('./util/assess.html',loadUrl)">更多信息</button>
                </div>
            </section>

            <section class="time">
                <div style="padding: 20px 10px 10px 10px;color: #8f8f94">
                    <span>入住时间</span>
                    <span style="float: right">退房时间</span>
                </div>
                <div class="time-panel" ms-on-tap="openTimePanel">
                    <div style="float: left;">
                        {{start|html}}
                    </div>
                    <div style="text-align: center;font-size: 12px;">|<br>{{amount + (type?'小时':'晚')}}<br>|</div>
                    <div style="float: right;text-align: right;">
                        {{end|html}}
                    </div>
                </div>
                <hr>
                <div class="time-clock" ms-if="!type">
                    <span style="color: #fff;background-color: #000;font-size: 12px;padding: 4px;">教你省钱</span>
                    &nbsp;&nbsp;<span style="font-size: 12px;">越晚入住越省钱哦！</span><br>
                    <div>
                        <div ms-repeat="roomNightDiscount" ms-on-tap="selectDiscount($index, el.startTime)" ms-class-1="discount-disabled:disableCheckinTime(startIndex, el.startTime)" ms-class-2="discount-selected:$index == startTimeIndex">
                            <img ms-attr-src="getClock($index, startTimeIndex, startIndex, el.startTime)" alt=""><br>
                            <span class="discount-time">{{el.startTime}}:00后</span>
                            <br>
                            <span class="discount-money">¥ {{el.discount}}</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="checkin" ms-on-tap="openCheckin">
                <p>入住人信息 <span class="mui-icon mui-icon-compose" style="color: #000;float: right;"></span></p>
                <div ms-repeat="checkinList">
                    {{el.name}}
                </div>
            </section>

            <div style="width: 95%;padding: 13px 0px;margin: 0 auto;margin-top:20px;">更多房间</div>
            <div class="swiper-container swiper2">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" ms-repeat="list" data-repeat-rendered="swiper2Render">
                        <!-- roomSlide -->
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <br><br><br>
        </div>
    </div>

     <nav class="mui-bar mui-bar-tab">
        <h4 class="mui-pull-left" style="margin: 13px;">
            <span class="error" style="font-weight: lighter;"><span style="font-size: 12px">￥</span><span style="font-size:24px;">{{showTotalPrice(price, amount)}}</span></span>
            <span style="font-weight: 100;" ms-if="!type"><span style="font-size: 12px">￥</span><del>{{showTotalPrice(roomNightDiscount[0].discount,amount)}}</del></span>
        </h4>
        <button type="button" class="mui-btn mui-btn-danger mui-pull-right" ms-click="goNext" ms-attr-disabled="isGoNext">立即预订</button>
    </nav>
</div>