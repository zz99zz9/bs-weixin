<style>.roomImg {
	width: 100%;
	height: 200px;
	display: block;
}

.roomImg div {
	background-size: cover;
	height: 100%;
	width: 100%;
	position: relative;
}

.roomImg div label {
	position: absolute;
	bottom: 20px;
	display: inline-block;
	color: white;
	background: black;
	width: 80px;
	line-height: 100%;
	font-size: 20px;
	text-align: center;
	padding: 5px;
}

.filter {
	/*display: flex;*/
	/*display: -webkit-flex;*/
	/*flex-direction: column;*/
}

.filter-row {
	/*background: white;*/
	text-align: center;
}

.filter-row .time {
	display: table;
	width: 100%;
	overflow: hidden;
	font-size: 15px;
	font-weight: 400;
	background-color: transparent;
	/*border: 1px solid #dd524d;*/
	border-radius: 3px;
	margin: 0 auto;
}

.filter-row .time a {
	color: gray;
	display: table-cell;
	width: 1%;
	overflow: hidden;
	/*line-height: 30px;*/
	text-align: center;
	text-overflow: ellipsis;
	white-space: nowrap;
	/*border-left: 1px solid #dd524d;*/
	padding: 0.3rem;
	background: white;
	vertical-align: middle;
	font-size: 14px;
	/*transition: background-color .1s linear;*/
}

.filter-row .time i {
	display: table-cell;
	width: 0.02%;
	vertical-align: middle;
	background: white;
	color: gainsboro;
	font-style: normal;
}

.filter-row .time .selected {
	color: #fff;
	background-color: #dd524d;
}

.time a:first-child {
	border-left-width: 0;
}

.mui-table-view:before {
	background: none;
}

.mui-table-view-divider {
	font-size: 14px;
}

.startTimeSelected:before {
	content: '\e442' !important;
	color: #DD524D !important;
}

.mui-toast-container {
	bottom: 50px;
}

.mui-toast-message {
	color: #fff;
	background-color: #dd524d;
	padding: 5px;
}

.mui-input-row label {
	width: 100%;
	font-size: 14px;
	text-align: left;
}

.mui-input-row:before {
	content: '\e411';
	display: inline-block;
	position: absolute;
	left: 16px;
	top: 9px;
	font-family: Muiicons;
	font-size: 28px;
	color: #bbb;
}

.partTimePrice {
	display: block;
	text-align: center;
	position: relative;
	top: -21px;
}

.mui-segmented-control-negative .mui-control-item {
	/*border-color: gray;*/
}

.clock {
	width: 20%;
	height: 100px;
    margin: 0 2vw;
	display: inline-block;
	font-weight: 200;
}

.clock .svg-circle{
	fill:#dd524d;
}
.clock .svg-time{
	opacity:0.8;
	font-size:20px;
}
.clock .svg-txt{
	opacity:0.5;
	font-size:12px;
}
.clock .svg-circle-gray{
	opacity:0.15;
}
.clock .percent{
	fill:none;
	stroke:#dd524d;
	stroke-miterlimit:10;
	stroke-width:2px;
}
.clock .svg-opacity {
	opacity: 0;
}

.clock .svg-price {
	opacity: 1;
}

.clock.active .svg-opacity {
	opacity: 1;
}

.clock.disabled .svg-price {
	opacity: .3;
}

.clock.disabled .percent{
	stroke:black;
	opacity: .15;
}

.clock.disabled .svg-circle{
	fill:gray;
}

.clock.disabled .svg-time{
	opacity:0.4;
}
.clock.disabled .svg-txt{
	opacity:0.5;
}

</style>
<div ms-controller="rooms">
    <div class="filter">
        <div class="filter-row mui-control-content mui-active">
            <br />
            <div class="time" style="width: 86%;" ms-visible="isPartTime==0">
                <a id="select_start" href="###" ms-on-touchend="startClick" ms-class="selected: statusControl.isStartEdit">
					入住时间<br><small ms-class="mui-text-danger:!statusControl.isStartEdit">{{startIndex==-1?'选择日期':(calendar[startIndex]?calendar[startIndex].date:'&nbsp;')}}</small>
				</a>
                <i>|</i>
                <a id="select_end" href="###" ms-on-touchend="endClick" ms-class="selected: statusControl.isEndEdit">
					退房时间<br><small ms-class="mui-text-danger:!statusControl.isEndEdit">{{endIndex==-1?'选择日期':(calendar[endIndex]?calendar[endIndex].date:'&nbsp;')}}</small>
				</a>
            </div>
            <div class="time" style="width: 86%;" ms-visible="isPartTime==1" ms-on-touchend="partTimeClick" >
            	<a href="###">
					入住时间<br><small class="mui-text-danger">{{partTimeStart||'选择时间'}}</small>
				</a>
				<i>|</i>
                <a href="###">
					退房时间<br><small class="mui-text-danger">{{partTimeEnd||'选择时间'}}</small>
				</a>
            </div>
            <br id="br1"/>

            <div class="mui-table-view" style="width:86%;margin: 0 auto;background: none;" ms-visible="statusControl.isCalendarShow">
                <div class="mui-table-view-divider mui-text-left">选择日期：</div>
                <div class="calendar" style="border-bottom: 1px solid gainsboro;">
                    <b>一</b><b>二</b><b>三</b><b>四</b><b>五</b><b>六</b><b>日</b>
                </div>
                <div class="calendar" ms-class="edit:statusControl.isCalendarEdit" style="background: url('img/loading.gif') no-repeat center;background-size: 81px 14px;height: 192px;overflow-y: auto;-webkit-overflow-scrolling: touch;">
                    <!-- <a href="###">
						15
						<sub>打折</sub>
					</a>-->
                    <a href="###" ms-repeat="calendar" ms-class-1="disabled:isDisabled($index,statusControl.isStartEdit,statusControl.isEndEdit,startIndex,endIndex)" ms-class-2="split-top:(el.day<=7)" ms-class-3="split-left:(el.day==1)" ms-class-4="selected:isSelected($index)" ms-class-5="start:$index==startIndex" ms-class-6="end:endIndex&&$index==endIndex" ms-on-tap="clickDate($index)">
                        <sup ms-if="el.day==1 && todayIndex!=$index">{{el.month}}月</sup> {{el.day==0?'&nbsp;':el.day}}
                        <sup ms-if="todayIndex==$index">今天</sup>
                    </a>
                </div>
                <!-- <div ms-visible="statusControl.isStartTimeEdit" style="background: #FAFAFA; margin-top: 15px;">
                    <div class="mui-table-view-cell mui-text-left" style="font-size: 14px;">
                        <a href="#time" id="showtimePicker">入住时间：<i class="mui-pull-right" id="timeResult" ms-repeat="nightDiscount">
                            <span ms-if="startTimeIndex == $index">{{el.startTime}}点以后入住，¥{{el.discount}}/天</span>
                        </i></a>
                    </div>
                </div> -->
                <br id="br2"/>
                <div class="mui-table-view" ms-visible="statusControl.isStartTimeShow">
                    <div class="mui-table-view-divider mui-text-left">选择入住时间：<p style="color:#dd524d;margin: 0 auto;text-align: center;">逐时定价体系，更晚入住更低价格</p></div>
                    <!-- 搜索显示 酒店夜房入住时段价格列表 -->
                    <svg ms-attr-id="'svg_filter_'+$index" xmlns="http://www.w3.org/2000/svg" viewBox="-1 -10 74 95" ms-repeat="nightDiscount" ms-if="pageType!='order'" ms-click="startTimeSelect(el.start_time, $index)" class="clock" ms-class-1="active:startTimeIndex == $index" ms-class-2="disabled:!((startIndex == todayIndex)?((el.start_time*2)>getHourIndex()):true)" ms-data-hour="el.start_time">
                        <path ms-attr-id="'svg_path_'+$index" class="" ms-class-1="svg-circle:$index==0" ms-class-2="svg-circle-gray:$index>0" d="M35.67,2a34,34,0,1,1-34,34,34,34,0,0,1,34-34m0-2a36,36,0,1,0,36,36,36,36,0,0,0-36-36h0Z" ></path>
                        <path class="percent" ms-attr-d="percent[$index]" ></path>
                        <text class="svg-time" x="50%" y="40%" text-anchor="middle">{{el.start_time}}:00</text>
                        <text class="svg-txt" x="50%" y="55%" text-anchor="middle">以后入住</text>
                        <!-- <text class="svg-price" x="50%" y="93px" text-anchor="middle">{{el.min}}元</text> -->
                        <g class='svg-opacity'>
                            <circle cx="36" cy="36" r="36" style="opacity:0.5" ></circle>
                            <path d="M49.75,36A13.77,13.77,0,0,1,36,49.75,13.77,13.77,0,0,1,22.25,36,13.77,13.77,0,0,1,36,22.25,13.77,13.77,0,0,1,49.75,36Zm-7-4-1.16-1.19-8.26,8.3L30.18,36,29,37.16l3.7,3.7a1.14,1.14,0,0,0,.3.21,0.68,0.68,0,0,0,.3.08,0.86,0.86,0,0,0,.59-0.3Z" style="fill:#fff" ></path>
                        </g>
                    </svg>

                    <!-- 下单显示 房间夜房入住时段价格列表 -->
                    <svg ms-attr-id="'svg_pay_'+$index" xmlns="http://www.w3.org/2000/svg" viewBox="-1 0 74 95" ms-repeat="roomNightDiscount" ms-if="pageType=='order'" ms-click="startTimeSelect(el.startTime, $index)" class="clock" ms-class-1="active:startTimeIndex == $index" ms-class-2="disabled:isStartTimeDisabled(startIndex, todayIndex, el.startTime)" ms-data-hour="el.startTime">
                        <path ms-class-1="svg-circle:$index==0" ms-class-2="svg-circle-gray:$index>0" d="M35.67,2a34,34,0,1,1-34,34,34,34,0,0,1,34-34m0-2a36,36,0,1,0,36,36,36,36,0,0,0-36-36h0Z" ></path>
                        <path class="percent" ms-attr-d="percent[$index]" ></path>
                        <text class="svg-time" x="50%" y="40%" text-anchor="middle">{{el.startTime}}:00</text>
                        <text class="svg-txt" x="50%" y="55%" text-anchor="middle">以后入住</text>
                        <text class="svg-price" x="50%" y="93px" text-anchor="middle">{{el.discount}}元</text>
                        <g class='svg-opacity'>
                            <circle cx="36" cy="36" r="36" style="opacity:0.5"></circle>
                            <path d="M49.75,36A13.77,13.77,0,0,1,36,49.75,13.77,13.77,0,0,1,22.25,36,13.77,13.77,0,0,1,36,22.25,13.77,13.77,0,0,1,49.75,36Zm-7-4-1.16-1.19-8.26,8.3L30.18,36,29,37.16l3.7,3.7a1.14,1.14,0,0,0,.3.21,0.68,0.68,0,0,0,.3.08,0.86,0.86,0,0,0,.59-0.3Z" style="fill:#fff"></path>
                        </g>
                    </svg>

                    <!-- <div class="mui-input-group mui-checkbox mui-left">
                    <div ms-repeat="roomNightDiscount" ms-if="pageType=='order'" ms-class="startTimeSelected:startTimeIndex == $index" ms-on-tap="startTimeSelect($index)" class="mui-input-row mui-left" ms-visible="(startIndex == todayIndex)?(el.startTime*2>getHourIndex()):true">
                        <label>{{el.startTime}}点以后入住，<span class="mui-text-danger">¥{{el.discount}}/天</span></label>
                    </div> 
                    <div ms-repeat="nightDiscount" ms-if="pageType!='order'" ms-class="startTimeSelected:startTimeIndex == $index" ms-click="startTimeSelect($index)" class="mui-input-row mui-left" ms-visible="(startIndex == todayIndex)?(el.startTime*2>getHourIndex()):true">
                        <label>{{el.start_time}}点以后入住，<span class="mui-text-danger">¥{{el.min+" - "+el.max}}/天</span></label>
                    </div> -->
                </div>
                <div ms-visible="pageType != 'order' && statusControl.isStartEdit" style="margin-top: 21px;">
                    <button type="button" class="mui-btn mui-btn-danger mui-btn-block" style="padding: 10px;" ms-click="endClick">退房时间</button>
                </div>
            </div>

            <div class="mui-table-view" ms-visible="statusControl.isTimeListShow" style="text-align: left;">
                <div class="mui-table-view-divider">选择当天时段</div>
                <div class="select-time" id='select_time' style="margin-bottom: 21px;">
                    <b>&nbsp;</b>
                    <div ms-repeat="timeList">
	                    <a href="###" ms-if="$index>=minIndex&&$index<=(maxIndex-4)&&$index%2==0&&el.isBook==0&&el.isWait==0" class="dotted" ms-data-time="$index/2" ms-on-tap="selectTime($index)">
	                    	<i>
	                    		{{($index/2+':00').length==5?($index/2+':00'):('0'+$index/2+':00')}}
							</i>
                            <span class="partTimePrice">{{partTimePriceShow($index,el.node,el.price)}}</span>
	                    </a>
	                    <a href="###" ms-if="$index>=minIndex&&$index<=(maxIndex-4)&&$index%2==1&&el.isBook==0&&el.isWait==0" ms-data-time="$index/2" ms-on-tap="selectTime($index)"></a>
						<b ms-if="$index>=minIndex&&$index<=(maxIndex-4)&&$index%2==0&&(el.isBook==1||el.isWait==1)" ms-class="select-time-disabled:el.isBook==1||el.isWait==1">
							<i>
								{{($index/2+':00').length==5?($index/2+':00'):('0'+$index/2+':00')}}
							</i>
                            <span class="partTimePrice">{{partTimePriceShow($index,el.node,el.price)}}</span>
						</b>
						<b ms-if="$index>=minIndex&&$index<=(maxIndex-4)&&$index%2==1&&(el.isBook==1||el.isWait==1)" ms-class="select-time-disabled:el.isBook==1||el.isWait==1"></b>
                    </div>
                    <b style="border: none;">
                    	<i style="text-align: center;width: 100%;position:relative;left:0;top:21px">{{(maxIndex-4)/2}}:30之后不再允许订时租房！</i>
                	</b>
                    <b style="border: none;"><i>{{(maxIndex-2)/2}}:00</i></b>
                    <b></b>
                    <b><i>{{maxIndex/2}}:00</i></b>
                    <table id="select_bar" class="mui-hidden bar">
                        <tr>
                            <td valign="center">
                                <p class="mui-text-center" style="margin: auto;color:black;" id="select_text">{{partTimeStart}} - {{partTimeEnd}} 时段
                                
                                <span ms-if="pageType == 'order'"><br>价格：{{partTimePay}}元</span>
                                </p>
                            </td>
                        </tr>
                        <tr style="height: 32px;">
                            <td style="text-align: center;border-top: 1px dotted rgba(0,0,0,0.1);vertical-align:middle;height：32px">
                                <button id="icon-minus" style="border-right: 1px dotted rgba(0,0,0,0.2);" ms-on-touchend="minusTime">－</button>
                                <button id="icon-plus" ms-on-touchend="addTime">＋</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="mui-table-view" style="width:86%;margin: 16px auto;background: none;" ms-visible="statusControl.isTypeShow">
            	<div style="background: #FAFAFA;">
                    <!--<div class="mui-table-view-cell">-->
                        <!--<a href="###" id="showUserPicker">选择房型：<i class="mui-pull-right" id="userResult">"全部房型"</i></a>-->
                    <div class="mui-segmented-control mui-segmented-control-negative" style="border:none;border-bottom: 1px solid #c8c7cc;border-radius: 0;">
						<a class="mui-control-item" ms-repeat="roomTypeList" ms-class="mui-active: typeid==el.id" href="#" style="border-color:#c8c7cc" ms-on-tap="selectType(el.id)">
							{{el.name}}
						</a>
					</div>
                    <!--</div>-->
                    <div class="mui-table-view-cell">
                    	<div class="mui-control-content" ms-repeat="roomTypeList" ms-class="mui-active: typeid==el.id">
                        	<p class="mui-text-left">{{el.introduction}}</p>
                        </div>
                        <p ms-visible="typeid==''">请选择房间系列</p>
                    </div>
                </div>
            </div>
            <button id='more' ms-visible="statusControl.isMoreBtnShow" type="button" class="mui-btn mui-btn-outlined mui-btn-danger" style="width: 86%;margin-bottom: 16px;padding: 10px;" ms-click="moreClick">更多筛选条件</button>

            <button id='search' type="button" class="mui-btn mui-btn-danger" ms-visible="(pageType != 'order' &&(statusControl.isTypeShow || statusControl.isCalendarShow || statusControl.isTimeListShow)) && !statusControl.isStartEdit" style="width: 86%;margin-bottom: 16px;padding: 10px;" ms-click="searchClick">搜索</button>
      
        </div>
    </div>
    <ul id="room_list" class="mui-table-view" ms-visible="statusControl.isRoomListShow">
        <li class="mui-table-view-cell" ms-if="list.length == 0">
            暂无符合条件的房间
        </li>
        <li class="mui-table-view-cell" ms-repeat="list" ms-click="goRoom(el.id)">
        <!-- roomSlide -->
        </li>
    </ul>
    <!-- <div id="time" class="mui-popover mui-popover-action mui-popover-bottom">
        <ul class="mui-table-view">
            <li ms-repeat="nightDiscount" class="mui-table-view-cell" ms-on-touchend="startTimeSelect($index)">
                <a href="#">{{el.startTime}}点以后入住，¥{{el.discount}}/天</a>
            </li>
        </ul>
        <ul class="mui-table-view">
            <li class="mui-table-view-cell">
                <a href="#picture">取消</a>
            </li>
        </ul>
    </div> -->
    <br><br><br>
    <nav class="mui-bar mui-bar-tab" ms-visible="pageType == 'order'" style="padding: 10px;">
        <button type="button" class="mui-btn mui-btn-danger mui-pull-right" ms-click="goNext()">下一步</button>
    </nav>
</div>
