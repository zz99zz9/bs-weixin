<style>
.ly-plate {
    padding: 18px 0 18px 0;
    background-image: url(../img/card/lottery-bg.jpg);
    background-repeat: no-repeat;
    background-size: cover;
}

.rotate-wheel {
    position: relative;
    text-align: center;
}
.wheel-edge{
    background-image: url(../img/card/wheel-edge.png);
    background-size: contain;
    background-repeat: no-repeat;
    width: 280px;
    height: 280px;
    margin: 0 auto;
}
#rotatebg {
    background-image: url(../img/card/wheel.png);
    background-size: contain;
    background-repeat: no-repeat;
    width: 235px;
    height: 235px;
    position: absolute;
    left: 50vw;
    top: 23px;
    margin-left: -117px;
}

#lotteryBtn {
    cursor: pointer;
    position: absolute;
    top: 95px;
    left: 50vw;
    z-index: 1;
    width: 64px;
    margin-left: -32px;
}

.swiper-container {
    height: 32px;
}

.lottery-btn-log,
.lottery-btn-rule {
    width: 50%;
    line-height: 40px;
    text-align: center;
    border: 1px solid #efeff4;
}

.lottery-btn-log:active,
.lottery-btn-rule:active {
    background-color: #eee
}

.lottery-task {
    display: flex;
    padding: 10px 10px 10px 0;
    margin-bottom: 2px;
}

.lottery-btn-go {
    width: 55px;
    height: 33px;
    padding: 0;
    border: none;
    border-radius: 0;
}
.prizeModal {
    width: 250px;
    height: 240px;
    background-color: #fff;
    margin: 0 auto;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    top: -90px;
    border-radius: 20px;
}
.prizeModal-close {
    width: 20px;
    height: 20px;
    background-image: url(../img/icon/close_black.svg);
    background-size: cover;
    background-repeat: no-repeat;
    display: inline-block;
    box-sizing: content-box;
    border: 11px solid transparent;
}
.prizeModal-btn {
    border-radius: 17px;
    border: none;
    color: white;
    width: 90px;
    margin-top: 10px;
}
</style>
<meta name="format-detection" content="telephone=no">
<div class="ms-controller" ms-controller="lottery">
    <!-- 转盘 -->
    <div class="ly-plate">
        <div class="bs-text-larger bs-text-white" style="text-align: center;margin: 2px 0 18px 0;">剩余 <span class="bs-text-yellow">{{chance}}</span> 次抽奖机会</div>
        <div class="rotate-wheel">
            <img src="img/card/pointer.png" id="lotteryBtn">
            <div id="rotatebg"></div>
            <div class="wheel-edge"></div>
        </div>
    </div>

    <div style="position: relative;">
        <img src="img/horn.png" alt="" style="width: 30px;float: left;position: absolute;z-index: 10;">
        <div class="swiper-container swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide bs-text-white bs-text-smaller swiper-no-swiping" ms-repeat="winnerList" data-repeat-rendered="renderSwiper">
                    <div class="bs-text-white bs-bg-black bs-text-smaller" style="line-height: 32px;width: 100%;text-align: left;padding-left:35px;">
                        恭喜会员{{el.name}}抽中
                        <span class="bs-text-yellow">{{prize[el.rank].text}}
                            <span ms-if="el.rank==5">{{el.amount}}元</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="display: flex;" class="bs-bg-white bs-text-red bs-text-large">
        <div class="lottery-btn-log" ms-click="openLog">中奖记录</div>
        <div class="lottery-btn-rule" ms-click="openRule">活动规则</div>
    </div>
    <div class="bs-text-102 bs-text-large" style="padding: 10px 16px;">获得更多抽奖机会</div>
    <!-- <div class="lottery-task bs-bg-white" ms-repeat="task" ms-click="goPromotion(el.type)">
        <div style="align-items: center;" class="flex-column">
            <img ms-attr-src="el.img" alt="" style="width: 40px;margin: 15px;">
        </div>
        <section class="flex-column" style="padding-right: 5px;">
            <div class="bs-text-larger" style="margin-top: 3px;">
                {{el.name}}
                <span class="bs-text-smaller">
                    &nbsp;&nbsp;增送<span class="bs-text-red">{{el.chance}}</span>次
                </span>
            </div>
            <div class="bs-text-102 bs-text-small" style="    margin: 3px 0;">转发本宿相关文章到朋友圈，完成一次推广任务</div>
            <div class="bs-text-large">
                +<span class="bs-text-red" style="padding-top: 10px;">{{el.add}}</span> 次抽奖机会</div>
        </section>
        <div class="flex-column">
            <button type="button" ms-if="cardTypeList.indexOf(4)>-1||cardTypeList.indexOf(el.type)>-1" class="lottery-btn-go bs-text-small bs-bg-black bs-text-white">去{{getText(el.type)}}</button>
        </div>
    </div> -->

    <div class="lottery-task bs-bg-white" ms-repeat="data" ms-click="goPromotion(el.type)">
        <div style="align-items: center;" class="flex-column">
            <img ms-attr-src="el.imgUrl" alt="" style="width: 40px;margin: 15px;">
        </div>
        <section class="flex-column" style="padding-right: 5px;">
            <div class="bs-text-larger" style="margin-top: 3px;">
                {{el.name}}会员
                <span class="bs-text-smaller">
                    &nbsp;&nbsp;赠送<span class="bs-text-red">{{el.lotteryDefaultTimes}}</span>次
                </span>
            </div>
            <div class="bs-text-102 bs-text-small" style="    margin: 3px 0;">转发本宿相关文章到朋友圈，完成一次推广任务</div>
            <div class="bs-text-large">
                +<span class="bs-text-red" style="padding-top: 10px;">{{el.lotteryShareTimes}}</span> 次抽奖机会</div>
        </section>
        <div class="flex-column">
            <button type="button" ms-if="cardTypeList.indexOf(4)>-1||cardTypeList.indexOf(el.type)>-1" class="lottery-btn-go bs-text-small bs-bg-black bs-text-white">去{{getText(el.type)}}</button>
        </div>
    </div>
    
    <!-- 弹窗 -->
    <div class="mask" style="display: none;">
        <div class="prizeModal">
            <section style="height: 38px;text-align: right;" class="bs-bg-yellow">
                <div class="prizeModal-close"></div>
            </section>
            <section style="border-bottom: 1px solid #ccc;">
                <img src="../img/card/prize-star.png" style="width: 55px;position: absolute;top: 6px;left: 12px;" alt="">
                <img src="../img/card/prize-con.png" style="width: 130px;position: relative;top: 5px;" alt="">
                <img src="../img/card/prize-stars.png" style="    position: absolute;left: -4px;top: 73px;width: 66px;" alt="">
                <img src="../img/card/prize-stars.png" style="    position: absolute;right: 4px;top: 73px;width: 66px;" alt="">
                <div class="flex-column" style="margin:6px auto;">
                    <div ms-css-background-image="'url(' + prize[prizeIndex].img + ')'" alt="" style="width: 80px;height: 80px;margin: 0 auto;background-repeat: no-repeat;background-size: contain;background-position: center;">
                        <div ms-if="prizeIndex==5" class="bs-text-large bs-text-white" style="margin-top:46px;">{{cash}} 元</div>
                    </div>
                    <div class="bs-text-large">{{prize[prizeIndex].text}}</div>
                </div>
            </section>

            <section style="display: flex;justify-content: space-around;">
                <button class="bs-bg-yellow prizeModal-btn" type="button" id="closeBtn">知道了</button>
                <button class="bs-bg-red prizeModal-btn" type="button" ms-click="goLog()">去看看</button>
            </section>
        </div>
    </div>
</div>